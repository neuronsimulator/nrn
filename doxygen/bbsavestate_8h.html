<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NEURON: /home/runner/work/nrn/nrn/src/nrniv/bbsavestate.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NEURON
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('bbsavestate_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bbsavestate.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="data__handle_8hpp_source.html">neuron/container/data_handle.hpp</a>&quot;</code><br />
</div>
<p><a href="bbsavestate_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_b_s_s___i_o.html">BBSS_IO</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_b_b_save_state.html">BBSaveState</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a552ce507ad30b2ae0e11e88a287bc66d"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bbsavestate_8h.html#a552ce507ad30b2ae0e11e88a287bc66d">bbss_buffer_counts</a> (int *len, int **gids, int **sizes, int *global_size)</td></tr>
<tr class="memdesc:a552ce507ad30b2ae0e11e88a287bc66d"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_b_b_save_state.html">BBSaveState</a> API See save_test_bin and restore_test_bin for an example of the use of this following interface.  <a href="bbsavestate_8h.html#a552ce507ad30b2ae0e11e88a287bc66d">More...</a><br /></td></tr>
<tr class="separator:a552ce507ad30b2ae0e11e88a287bc66d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad78d068462392a6cfe2c221df4d8b249"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bbsavestate_8h.html#ad78d068462392a6cfe2c221df4d8b249">bbss_save_global</a> (void *<a class="el" href="bbsavestate_8cpp.html#a5f315feca14a3593bb2c8e1f44ba2d3b">bbss</a>, char *buffer, int sz)</td></tr>
<tr class="memdesc:ad78d068462392a6cfe2c221df4d8b249"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call only on host 0 with a buffer of size equal to the global_size returned from the bbss_buffer_counts call on host 0 sz is the size of the buffer (for error checking only, buffer+sz is out of bounds)  <a href="bbsavestate_8h.html#ad78d068462392a6cfe2c221df4d8b249">More...</a><br /></td></tr>
<tr class="separator:ad78d068462392a6cfe2c221df4d8b249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61008d664d3f65ea712e30b6023ec7dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bbsavestate_8h.html#a61008d664d3f65ea712e30b6023ec7dc">bbss_restore_global</a> (void *<a class="el" href="bbsavestate_8cpp.html#a5f315feca14a3593bb2c8e1f44ba2d3b">bbss</a>, char *buffer, int sz)</td></tr>
<tr class="memdesc:a61008d664d3f65ea712e30b6023ec7dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call on all hosts with the buffer contents returned from the call to bbss_save_global.  <a href="bbsavestate_8h.html#a61008d664d3f65ea712e30b6023ec7dc">More...</a><br /></td></tr>
<tr class="separator:a61008d664d3f65ea712e30b6023ec7dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc8cd98e956d3f3b4b8eac24c8d4e4c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bbsavestate_8h.html#acc8cd98e956d3f3b4b8eac24c8d4e4c4">bbss_save</a> (void *<a class="el" href="bbsavestate_8cpp.html#a5f315feca14a3593bb2c8e1f44ba2d3b">bbss</a>, int gid, char *buffer, int sz)</td></tr>
<tr class="memdesc:acc8cd98e956d3f3b4b8eac24c8d4e4c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this for each item of the gids from bbss_buffer_counts along with a buffer of size from the corresponding sizes array.  <a href="bbsavestate_8h.html#acc8cd98e956d3f3b4b8eac24c8d4e4c4">More...</a><br /></td></tr>
<tr class="separator:acc8cd98e956d3f3b4b8eac24c8d4e4c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac37ebfbcec7ef6d22a5e605e4caddd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bbsavestate_8h.html#a0ac37ebfbcec7ef6d22a5e605e4caddd">bbss_restore</a> (void *<a class="el" href="bbsavestate_8cpp.html#a5f315feca14a3593bb2c8e1f44ba2d3b">bbss</a>, int gid, int npiece, char *buffer, int sz)</td></tr>
<tr class="memdesc:a0ac37ebfbcec7ef6d22a5e605e4caddd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this for each item of the gids from bbss_buffer_counts, the number of buffers that were concatenated for the gid, and the concatenated buffer (the concatenated buffer does NOT contain npiece as the first value in the char* buffer pointer).  <a href="bbsavestate_8h.html#a0ac37ebfbcec7ef6d22a5e605e4caddd">More...</a><br /></td></tr>
<tr class="separator:a0ac37ebfbcec7ef6d22a5e605e4caddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9ad532d786b039838118fa36e097f52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bbsavestate_8h.html#ac9ad532d786b039838118fa36e097f52">bbss_save_done</a> (void *<a class="el" href="bbsavestate_8cpp.html#a5f315feca14a3593bb2c8e1f44ba2d3b">bbss</a>)</td></tr>
<tr class="memdesc:ac9ad532d786b039838118fa36e097f52"><td class="mdescLeft">&#160;</td><td class="mdescRight">At the end of the save process, call this to cleanup.  <a href="bbsavestate_8h.html#ac9ad532d786b039838118fa36e097f52">More...</a><br /></td></tr>
<tr class="separator:ac9ad532d786b039838118fa36e097f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22267b9ea1b742292d91425a8166a8cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bbsavestate_8h.html#a22267b9ea1b742292d91425a8166a8cb">bbss_restore_done</a> (void *<a class="el" href="bbsavestate_8cpp.html#a5f315feca14a3593bb2c8e1f44ba2d3b">bbss</a>)</td></tr>
<tr class="memdesc:a22267b9ea1b742292d91425a8166a8cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">At the end of the restore process, call this to do some extra setting up and cleanup.  <a href="bbsavestate_8h.html#a22267b9ea1b742292d91425a8166a8cb">More...</a><br /></td></tr>
<tr class="separator:a22267b9ea1b742292d91425a8166a8cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a552ce507ad30b2ae0e11e88a287bc66d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a552ce507ad30b2ae0e11e88a287bc66d">&#9670;&nbsp;</a></span>bbss_buffer_counts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* bbss_buffer_counts </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>gids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>sizes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>global_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="class_b_b_save_state.html">BBSaveState</a> API See save_test_bin and restore_test_bin for an example of the use of this following interface. </p>
<p>Note in particular the use in restore_test_bin of a prior <a class="el" href="namespacecoreneuron.html#a079a8d91b491459e3b4a2033ce4dde94">clear_event_queue()</a> in order to allow bbss_buffer_counts to pass an assert during the restore process. First call to return the information needed to make the other calls. Returns a pointer used by the other methods. Caller is reponsible for freeing (using free() and not delete []) the returned gids and sizes arrays when finished. The sizes array and global_size are needed for the caller to construct proper buffer sizes to pass to bbss_save_global and bbss_save for filling in. The size of these arrays is returned in *len. They are not needed for restoring (since the caller is passing already filled in buffers that are read by bbss_restore_global and bbss_restore. The gids returned are base gids. It is the callers responsibility to somehow concatenate buffers with the same gid (from different hosts) either after save or before restore and preserve the piece count of the number of concatenated buffers for each base gid. Global_size will only be non_zero for host 0. </p>

<p class="definition">Definition at line <a class="el" href="bbsavestate_8cpp_source.html#l00774">774</a> of file <a class="el" href="bbsavestate_8cpp_source.html">bbsavestate.cpp</a>.</p>

</div>
</div>
<a id="a0ac37ebfbcec7ef6d22a5e605e4caddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ac37ebfbcec7ef6d22a5e605e4caddd">&#9670;&nbsp;</a></span>bbss_restore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bbss_restore </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bbss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>npiece</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call this for each item of the gids from bbss_buffer_counts, the number of buffers that were concatenated for the gid, and the concatenated buffer (the concatenated buffer does NOT contain npiece as the first value in the char* buffer pointer). </p>
<p>sz is the size of the buffer (error checking only). </p>

<p class="definition">Definition at line <a class="el" href="bbsavestate_8cpp_source.html#l00808">808</a> of file <a class="el" href="bbsavestate_8cpp_source.html">bbsavestate.cpp</a>.</p>

</div>
</div>
<a id="a22267b9ea1b742292d91425a8166a8cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22267b9ea1b742292d91425a8166a8cb">&#9670;&nbsp;</a></span>bbss_restore_done()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bbss_restore_done </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bbss</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>At the end of the restore process, call this to do some extra setting up and cleanup. </p>
<p>When this call returns, bbss will be invalid. </p>

<p class="definition">Definition at line <a class="el" href="bbsavestate_8cpp_source.html#l00857">857</a> of file <a class="el" href="bbsavestate_8cpp_source.html">bbsavestate.cpp</a>.</p>

</div>
</div>
<a id="a61008d664d3f65ea712e30b6023ec7dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61008d664d3f65ea712e30b6023ec7dc">&#9670;&nbsp;</a></span>bbss_restore_global()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bbss_restore_global </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bbss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call on all hosts with the buffer contents returned from the call to bbss_save_global. </p>
<p>This must be called prior to any calls to bbss_restore sz is the size of the buffer (error checking only). This also does some other important restore initializations. </p>

<p class="definition">Definition at line <a class="el" href="bbsavestate_8cpp_source.html#l00792">792</a> of file <a class="el" href="bbsavestate_8cpp_source.html">bbsavestate.cpp</a>.</p>

</div>
</div>
<a id="acc8cd98e956d3f3b4b8eac24c8d4e4c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc8cd98e956d3f3b4b8eac24c8d4e4c4">&#9670;&nbsp;</a></span>bbss_save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bbss_save </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bbss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>gid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call this for each item of the gids from bbss_buffer_counts along with a buffer of size from the corresponding sizes array. </p>
<p>The buffer will be filled in with savestate information. The gid may be the same on different hosts, in which case it is the callers responsibility to concatentate buffers at some point to allow calling of bbss_restore. sz is the size of the buffer (error checking only). </p>

<p class="definition">Definition at line <a class="el" href="bbsavestate_8cpp_source.html#l00800">800</a> of file <a class="el" href="bbsavestate_8cpp_source.html">bbsavestate.cpp</a>.</p>

</div>
</div>
<a id="ac9ad532d786b039838118fa36e097f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9ad532d786b039838118fa36e097f52">&#9670;&nbsp;</a></span>bbss_save_done()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bbss_save_done </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bbss</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>At the end of the save process, call this to cleanup. </p>
<p>When this call returns, bbss will be invalid. </p>

<p class="definition">Definition at line <a class="el" href="bbsavestate_8cpp_source.html#l00819">819</a> of file <a class="el" href="bbsavestate_8cpp_source.html">bbsavestate.cpp</a>.</p>

</div>
</div>
<a id="ad78d068462392a6cfe2c221df4d8b249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78d068462392a6cfe2c221df4d8b249">&#9670;&nbsp;</a></span>bbss_save_global()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bbss_save_global </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>bbss</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call only on host 0 with a buffer of size equal to the global_size returned from the bbss_buffer_counts call on host 0 sz is the size of the buffer (for error checking only, buffer+sz is out of bounds) </p>

<p class="definition">Definition at line <a class="el" href="bbsavestate_8cpp_source.html#l00786">786</a> of file <a class="el" href="bbsavestate_8cpp_source.html">bbsavestate.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_3839636f4dffaa4aab0a620bf9b8685f.html">nrniv</a></li><li class="navelem"><a class="el" href="bbsavestate_8h.html">bbsavestate.h</a></li>
  </ul>
</div>
<hr class="footer"/>
<address class="footer">
    <small>
    </small>
</address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
