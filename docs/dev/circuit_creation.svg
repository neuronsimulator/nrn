<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1002px" height="612px" viewBox="-0.5 -0.5 1002 612" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2023-06-13T07:05:24.733Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.2.8 Chrome/112.0.5615.165 Electron/24.2.0 Safari/537.36&quot; version=&quot;21.2.8&quot; etag=&quot;xL4NiNZu5vHTkLXaANUX&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;Page-1&quot; id=&quot;6-R2j7xKJM4-tql-8pQL&quot;&gt;7Vjfb9s2EP5rDLQPCyTRcqzH2Gm2AdtQIAPWPhmUREtEKdKjqNjZX787kvrtBGnhDR669kHi6Y7k3feR98ULsq1OP2p6KH9VOROLKMhPC3K/iCKyDAk80PLsLGGQrJyl0Dz3tt7wyP9iraO3Njxn9cjRKCUMP4yNmZKSZWZko1qr49htr8R41QMt2MzwmFExt/7Bc1N6axIF/YefGC/Kduko8F8q2np7Q13SXB0HJvJhQbZaKePeqtOWCSxfWxgX9/DC125nmknzloDIBTxR0fjkMs2oYbsaCseVfPd+Qe4W0YpWhwXZyLTGR2kMVvoOp40eCm7KJr3JVAUDyRqtZM2rRlCjNFq0dH6ErIIsX8UkzMn+Ng6iLE72yzxga8aSiAb75ZqmjKTgWtHaMAyudeamUPjMaJoBm26yw2ERkV/CtadNbZ5baLRqZM4wuQA2eiy5YY8HmuHXI7DRbr4SMArhVcB6YkOzL4UN2yoBOyb3Uknw3/jKMG3Y6cXqhh1mQHemKmb0M7i0AWHsQlqmR4nH/djzZh14p3JAmZX3o56qRTd3DyYWyuF5HlsywxaAFLDAZq9g/3g+XMJg/rNBxkHOJLD/hqZVgc8t11nDbRgyBLjRzgb7cBM6xxkmUD8zLnxttPrCJvXecyEmJip4IWGYQb2BD2SDaHA4iHf+Q8XzHJc5i/SYC7jFbZcw2dj//xTMZA5zi+gQZXIBlJczlCU7tse39uc3uJIjG63j/9qRXYb/4pGNXwPzUndxKlT61fi+DmuctJdBqtt74PeS19hdG+moiKgzg4/+cjGasV1WUlkAAeADphyE7tbp7p8AOJGVWCUMbmrruseEoH3y/V5wWdjJu3UgX+TidEc/4+1FRa3wEqNCjPcC8TswqgzqfG51+w0mxiiKkavg0S35EcTHAuF/bcFhuCmZm+A3KCI80JY++13ZbMYgQ7kF2x20OuxoXcPV9+79D52PXQmA8XXcyZoV8++wUJfdJVn0zRSqlXjqCLSOzlQPqqRZCzse8MjVC44zs+CzosJTfeUXyu3N5EaJl/MbJQyCM/0hDC9wp6zOyIBJxZjM71AXY6sVyLBsXKRXO6kXDGTDTtx8Qh9I2I0++3h8vz/5cDt4bgcSshkE4fDz8FsfZkdtnEuB5ROhXqtGZ2wkbQ3VBTOjXvkG8AbQxGeAaW2awaHgT+NNnAPLr/BRcau8Tm3LmFAjjCeAu4R82FDHT2eKpzMFk5lcHWYzWfZ0ib+JULffKaGWc0LF/xPqAoRazwj16K722rZE2TfRlPV/1qMMeMh5PRhClU1pZ9JcNVP1YUpqnAiZtr+vFCTTRjWdDptxv7HrlW3xeu01h03WKpAzBetT6aSL11rzUnhH1FK8OojrzX0VJD2VbCpALnNkDN/MUY0E5UyZDFgyU17XmnG4vLVw2712SMqmSq2aUvteUiH4XPYluIHXoZZtdfwqePm8oB7eOqec0+plp4DK3PnBahPZqhmwE2S5ZnQ3j7xq3Udmuu82muu+5NzPAmF0AdmXfKddOp536fWVdelkOWXGtLe+tUsnZPq3xfQnpW/u0jDsf4Z27v3P+eTD3w==&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="98" y="60" width="805" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 803px; height: 1px; padding-top: 90px; margin-left: 99px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">create_section(): https://github.com/neuronsimulator/nrn//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/master/src/nrnoc/cabcode.cpp#L186</div></div></div></foreignObject><text x="501" y="94" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">create_section(): https://github.com/neuronsimulator/nrn//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/master/src/nrnoc/cabcode.cpp#L186</text></switch></g><rect x="98" y="0" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 15px; margin-left: 99px;"><div data-drawio-colors="color: #B3B3B3; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(179, 179, 179); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font color="#000000">Circuit creation</font></div></div></div></foreignObject><text x="128" y="19" fill="#B3B3B3" font-family="Helvetica" font-size="12px" text-anchor="middle">Circuit cr...</text></switch></g><rect x="98" y="180" width="805" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 803px; height: 1px; padding-top: 210px; margin-left: 99px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">new_sections(): https://github.com/neuronsimulator/nrn//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/master/src/nrnoc/cabcode.cpp#L285</div></div></div></foreignObject><text x="501" y="214" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">new_sections(): https://github.com/neuronsimulator/nrn//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/master/src/nrnoc/cabcode.cpp#L285</text></switch></g><rect x="0.5" y="310" width="1000" height="110" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 998px; height: 1px; padding-top: 365px; margin-left: 2px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">new_section(): https://github.com/neuronsimulator/nrn/blob//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/cabcode.cpp#L259<br />This functions sets "tree_changed = 1;" which is used for shiffling sections later<br />It also calls "sec_alloc()" which allocates a `SectionPool`<br />It also allocates the `Node`s by calling cable_prop_assign()-&gt;nrn_change_nseg()-&gt;node_alloc(): https://github.com/neuronsimulator/nrn/blob/3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/solve.cpp#L820<br />there is one Node per segment</div></div></div></foreignObject><text x="501" y="369" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">new_section(): https://github.com/neuronsimulator/nrn/blob//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/cabcode.cpp#L259...</text></switch></g><path d="M 500.5 120 L 500.5 173.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 500.5 178.88 L 497 171.88 L 500.5 173.63 L 504 171.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 500.5 240 L 500.5 303.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 500.5 308.88 L 497 301.88 L 500.5 303.63 L 504 301.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="20.5" y="490" width="960" height="120" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 958px; height: 1px; padding-top: 550px; margin-left: 22px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Segments can also be connected/disconnected with various functions that set "tree_changed = 1;"<br /> nrn_disconnect(): https://github.com/neuronsimulator/nrn/blob//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/cabcode.cpp#L588 called by functions that disconnect the section<br />connectsec_impl(): https://github.com/neuronsimulator/nrn/blob//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/cabcode.cpp#L609 connection between two sections<br />tree_changednrn_change_nseg(): https://github.com/neuronsimulator/nrn/blob//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/cabcode.cpp#L1478 change the number of segments in section. It also sets `tree_changed = 1;`, `diam_changed = 1;` and `sec-&gt;recalc_area_ = 1;`</div></div></div></foreignObject><text x="501" y="554" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Segments can also be connected/disconnected with various functions that set "tree_changed = 1;"...</text></switch></g><path d="M 500.5 420 L 500.5 483.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 500.5 488.88 L 497 481.88 L 500.5 483.63 L 504 481.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>