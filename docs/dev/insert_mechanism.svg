<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1591px" height="651px" viewBox="-0.5 -0.5 1591 651" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2023-06-13T07:06:15.636Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.2.8 Chrome/112.0.5615.165 Electron/24.2.0 Safari/537.36&quot; version=&quot;21.2.8&quot; etag=&quot;Ndw5AGtWfnWbUy1fhhXv&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;Page-1&quot; id=&quot;QuhRjJ8tO8CuxAayrGKS&quot;&gt;3VjbbuM2EP0aA9mHBJQoK9ZjnE3aBXaBAinQR4MiR5dGIl2KsuN+fYcXyZbtAIvdbNLED7J0eBvOnDMaakZv26ffNFtX35SAZhYT8TSjn2dxTLOI4J9Fdh6JkjT2SKlrEbA98FD/CwEMA8u+FtBNOhqlGlOvpyBXUgI3E4xprbbTboVqpquuWQknwANnzSn6Vy1MFdAsJvuG36Euq2HpmISWlg29A9BVTKjtAUTvZvRWK2X8Xft0C4113+AYP+7+mdbRMg3SfM+A4PgNa/qwuS+yA22srcArJuuuDZaa3bB/A084+bIybYNAhLed0eoRblWjNCJSSey5LOqmOYJYU5cSHzmaB4gvN7hWjZ69CQ1tLYRdZrmtagMPa8btmlskEmJa9VKAtZzY6ZU0w/SzmBL3QzzsCCeGp2e9Eo2+RpqCasHoHXYZBkRJiE+gaJzMA7DdBzwNUHUQahowFihWjnPvg4A3IQ7nY0JPYnISARBIyPCotKlUqSRr7vboka/2fb4qtQ5B+xuM2QV1sd6oaUj9mnahiRM71WseoCRoj+kSBr+S7/a1hoaZejOd/mf8lpz4zVJ4VTtCRxefZvTGRssYmyZu7LTxfVmbqs+vuEKW30votZJd3fZoGfIKES3xmjcq990pTQkX6ZxGghbXcxLzeVYkgsACIIsZKZIFy4Ha3p3mfgJl/znLOSbCK75eI1e/LpLEGn5GapjJ7KUCvD5g8qoVWkAuWsB2WVoPuT37DlLZPBgTVYxQNwzJrY9RWY0fttZqvcInxdERx3SakuWc9A6I0eAOmyXjj6Ubdiz6Z1R5mAwQv3e/F1IrTY/Umsanao3I/Ixe0xfQ6/y96DU91WvydnJNT9x2r60MyXqHm5dOoilrLftk3nkS/qh0OYBIWZrzJOMJRJCwIqdRBDFfRCmHJEtzQmJbhux1G8wI9yu8DuqNosXi5zT0Iu8oesT6+RnWXy9+Eemv3wvpF/8r0i+eI32Fr4m3Zny98f8tyH7kepzO357r2XE99qpcz94L14fqa1KRxW/H9sGeA89N6pCXJPwPl2ZGA3RgBsKnGW48bewBJ9eTIKf/9MrBSgvQl9xXMzduf/ri8vIQ/+QCNozAu9L+n2ye4MK2gJulZLPCQ1TPTa9hZavB0lZzbl3iom+JvDfLz/fF+IJQcWZcIchsUQhbP+MfuJobRvzM7qirx0rxsOhkUoRqsRvb/Yo+Om5dV01L1sIIOyP8hvxCRS+H+lNAUUsQrsw9uyZWhHD14UvR6/Q1S9EoejepKj6TqugbpqrTLyETCXFMPU5FTkGDUqaoO4Zhd7W1Z7UVMt1+y3DDkci8Go98U6lCA63d70QpGzic1D/ZYTYyutn5Q92YMUK/aS71xhQ1NGIlmGFTNf/JcIZbu57ujxRtTX7J1FwwPI4WEJGFyEVGIKLA5kWcFNF1wvIsZYyKBbXcPUrNnT8AX1U2Mds8+NGzRUZeNVucfmlCiT/aWS0b9++vb9AqZ3h41/gM75g5odf4uvvYYaIk+YVhmtkjwfD917UdfEend/8B&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="10" y="0" width="60" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 15px; margin-left: 11px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Insert mechanism</div></div></div></foreignObject><text x="40" y="19" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Insert mec...</text></switch></g><path d="M 755 230 L 755 303.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 755 308.88 L 751.5 301.88 L 755 303.63 L 758.5 301.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="230" y="170" width="1050" height="60" fill="#ffffff" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1048px; height: 1px; padding-top: 200px; margin-left: 231px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">mech_insert1(): https://github.com/neuronsimulator/nrn/blob//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/cabcode.cpp#L844 insert mechanism to the Section (meaning all the nodes of the sction by calling prop_alloc()</div></div></div></foreignObject><text x="755" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">mech_insert1(): https://github.com/neuronsimulator/nrn/blob//3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/cabcode.cpp#L844 insert mechanism to the Section (meaning all t...</text></switch></g><path d="M 390 130 L 390 150 L 755 150 L 755 163.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 755 168.88 L 751.5 161.88 L 755 163.63 L 758.5 161.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="70" width="780" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 778px; height: 1px; padding-top: 100px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">From python: https://github.com/neuronsimulator/nrn/blob/ceed6a6bc49c4e1e4afb311e2c816ce496b00262/src/nrnpython/nrnpy_nrn.cpp#L1188</div></div></div></foreignObject><text x="390" y="104" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">From python: https://github.com/neuronsimulator/nrn/blob/ceed6a6bc49c4e1e4afb311e2c816ce496b00262/src/nrnpython/nrnpy_nrn.cpp#L1188</text></switch></g><path d="M 1200 130 L 1200 150 L 755 150 L 755 163.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 755 168.88 L 751.5 161.88 L 755 163.63 L 758.5 161.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="810" y="70" width="780" height="60" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 778px; height: 1px; padding-top: 100px; margin-left: 811px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">From hoc: https://github.com/neuronsimulator/nrn/blob/ceed6a6bc49c4e1e4afb311e2c816ce496b00262/src/nrniv/nrnmenu.cpp#L1265</div></div></div></foreignObject><text x="1200" y="104" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">From hoc: https://github.com/neuronsimulator/nrn/blob/ceed6a6bc49c4e1e4afb311e2c816ce496b00262/src/nrniv/nrnmenu.cpp#L1265</text></switch></g><path d="M 755 370 L 755 443.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 755 448.88 L 751.5 441.88 L 755 443.63 L 758.5 441.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="230" y="310" width="1050" height="60" fill="#ffffff" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1048px; height: 1px; padding-top: 340px; margin-left: 231px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">prop_alloc(): https://github.com/neuronsimulator/nrn/blob/3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/treeset.cpp#L691<br style="border-color: var(--border-color);" />prop_alloc(): sets `v_structure_change = 1;`<br />It allocates a new `Prop` struct for the mechanism and calls the `&lt;mech_name&gt;_alloc` function defined in the mechanism file.</div></div></div></foreignObject><text x="755" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">prop_alloc(): https://github.com/neuronsimulator/nrn/blob/3360cd6531d3f7502c59f4d0e8ee92a0f48abe3b/src/nrnoc/treeset.cpp#L691...</text></switch></g><path d="M 755 510 L 755 583.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 755 588.88 L 751.5 581.88 L 755 583.63 L 758.5 581.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="230" y="450" width="1050" height="60" fill="#ffffff" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1048px; height: 1px; padding-top: 480px; margin-left: 231px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">`Prop` constructor calls constructor of `owning_handle` which inserts a new element in the vector of vectors underlying structure of  `field_data&lt;Tag, true&gt;`: https://github.com/neuronsimulator/nrn/blob/fa20bfe108dbd90e13ea5f24f174ab96aa3d8311/src/nrnoc/section.h#L201</div></div></div></foreignObject><text x="755" y="484" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">`Prop` constructor calls constructor of `owning_handle` which inserts a new element in the vector of vectors underlying structure of  `field_data&lt;Tag, true&gt;`: https://github.c...</text></switch></g><rect x="230" y="590" width="1050" height="60" fill="#ffffff" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1048px; height: 1px; padding-top: 620px; margin-left: 231px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Look at "Memory allocation of field_data"</div></div></div></foreignObject><text x="755" y="624" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Look at "Memory allocation of field_data"</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>