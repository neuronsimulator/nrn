<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Other scripting languages &mdash; NEURON  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=6933245a" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/design-tabs.js?v=f930bc37"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Python tutorials" href="tutorials/index.html" />
    <link rel="prev" title="Impx" href="hoc/analysis/guitools/impedanx.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            NEURON
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Building:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cmake_doc/index.html">CMake Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="install/developer.html">Developer Builds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="videos/index.html">Training videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="courses/exercises2018.html">NEURON Course Exercises</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuron.yale.edu/phpBB">The NEURON forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications about NEURON</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications-using-neuron.html">Publications using NEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NEURON scripting:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="scripting.html">Running Python and HOC scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="python/index.html">NEURON Python documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="hoc/index.html">NEURON HOC documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Other scripting languages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-julia-for-use-with-neuron">Setting up Julia for use with NEURON</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-simple-julia-example">A simple Julia example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="rxd-tutorials/index.html">Python RXD tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="coreneuron/index.html">CoreNEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NMODLanguage:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nmodl/index.html">NMODLanguage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scm/index.html">NEURON SCM and Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev/index.html">NEURON Development topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="doxygen.html">C/C++ API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Removed Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="removed_features.html">Removed Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">NEURON 8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html#neuron-8-1">NEURON 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html#neuron-8-0">NEURON 8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html#feedback-help">Feedback / Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NEURON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Other scripting languages</li>
<li class="wy-breadcrumbs-aside">
    
    
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="_sources/otherscripting.rst.txt" rel="nofollow"> View page source</a>
      </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="other-scripting-languages">
<h1>Other scripting languages<a class="headerlink" href="#other-scripting-languages" title="Link to this heading"></a></h1>
<p>While NEURON currently only officially supports Python and HOC scripting, many other
programming environments can be used with NEURON through a Python compatibility layer.</p>
<p>Bringing data recorded in NEURON (e.g. via <a class="reference internal" href="python/programming/math/vector.html#Vector.record" title="Vector.record"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.record()</span></code></a>) into the other programming
language is sometimes problematic as it may not know how to interpret <a class="reference internal" href="python/programming/math/vector.html#Vector" title="Vector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vector</span></code></a> objects;
one way to work-around this is to copy them into Python lists using <a class="reference internal" href="python/programming/math/vector.html#Vector.to_python" title="Vector.to_python"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.to_python()</span></code></a>.</p>
<p>We demonstrate with <a class="reference external" href="http://julialang.org">Julia</a>.</p>
<section id="setting-up-julia-for-use-with-neuron">
<h2>Setting up Julia for use with NEURON<a class="headerlink" href="#setting-up-julia-for-use-with-neuron" title="Link to this heading"></a></h2>
<p>By default, Julia uses its own version of Python instead of the system Python.
As such, you’ll need to either change Julia to use the system Python or install
NEURON within Julia itself using <code class="docutils literal notranslate"><span class="pre">pip</span></code>. (Currently <code class="docutils literal notranslate"><span class="pre">pip</span></code> for NEURON only works
in Linux and macOS.)</p>
<p>To setup Julia to use NEURON on Linux or macOS, open an interactive Julia session by typing <code class="docutils literal notranslate"><span class="pre">julia</span></code> and then enter:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="n">Pkg</span>
<span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;PyCall&quot;</span><span class="p">)</span>
<span class="n">Pkg</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;Plots&quot;</span><span class="p">)</span>
<span class="k">using</span><span class="w"> </span><span class="n">PyCall</span>
<span class="n">subprocess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pyimport</span><span class="p">(</span><span class="s">&quot;subprocess&quot;</span><span class="p">)</span>
<span class="nb">ENV</span><span class="p">[</span><span class="s">&quot;PYTHONHOME&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-m&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;pip&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;install&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;neuron&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>This additionally installs two Julia packages: <code class="docutils literal notranslate"><span class="pre">PyCall</span></code>, the Python-compatibility API, and <code class="docutils literal notranslate"><span class="pre">Plots</span></code> which provides graphics functions.</p>
<p>This setup only needs to be performed once.</p>
</section>
<section id="a-simple-julia-example">
<h2>A simple Julia example<a class="headerlink" href="#a-simple-julia-example" title="Link to this heading"></a></h2>
<p>Within any script that is to use NEURON, we begin by getting NEURON’s <code class="docutils literal notranslate"><span class="pre">h</span></code> object, which is the primary way of interacting with NEURON in Python as well. To do so, we write:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">PyCall</span>
<span class="n">neuron</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pyimport</span><span class="p">(</span><span class="s">&quot;neuron&quot;</span><span class="p">)</span>
<span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">neuron</span><span class="o">.</span><span class="n">h</span>
</pre></div>
</div>
<p>We can then use the <code class="docutils literal notranslate"><span class="pre">h</span></code> object as described in the <a class="reference external" href="python/index.html">Python programmer’s reference</a>.</p>
<p>The following code simulates and plots an action potential in a Hodgkin-Huxley point cell:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">PyCall</span>
<span class="k">using</span><span class="w"> </span><span class="n">Plots</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;setting up model...&quot;</span><span class="p">)</span>

<span class="n">neuron</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pyimport</span><span class="p">(</span><span class="s">&quot;neuron&quot;</span><span class="p">)</span>

<span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">neuron</span><span class="o">.</span><span class="n">h</span>
<span class="n">h</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s">&quot;stdrun.hoc&quot;</span><span class="p">)</span>

<span class="n">soma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span><span class="s">&quot;soma&quot;</span><span class="p">)</span>
<span class="n">soma</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">hh</span><span class="p">)</span>
<span class="n">soma</span><span class="o">.</span><span class="n">L</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="n">soma</span><span class="o">.</span><span class="n">diam</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>

<span class="n">ic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="o">.</span><span class="n">IClamp</span><span class="p">(</span><span class="n">soma</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))</span>
<span class="n">ic</span><span class="o">.</span><span class="n">amp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.5</span>
<span class="n">ic</span><span class="o">.</span><span class="n">dur</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span>
<span class="n">ic</span><span class="o">.</span><span class="n">delay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>

<span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="o">.</span><span class="kt">Vector</span><span class="p">()</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">_ref_t</span><span class="p">)</span>
<span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="o">.</span><span class="kt">Vector</span><span class="p">()</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">soma</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">_ref_v</span><span class="p">)</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;simulating...&quot;</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">finitialize</span><span class="p">(</span><span class="o">-</span><span class="mi">65</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">continuerun</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="n">println</span><span class="p">(</span><span class="s">&quot;plotting...&quot;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">to_python</span><span class="p">(),</span><span class="w"> </span><span class="n">v</span><span class="o">.</span><span class="n">to_python</span><span class="p">()))</span>

<span class="n">print</span><span class="p">(</span><span class="s">&quot;Press enter to close...&quot;</span><span class="p">)</span>
<span class="n">readline</span><span class="p">()</span>
</pre></div>
</div>
<img alt="_images/julia_ap.png" src="_images/julia_ap.png" />
<p>Here the <code class="docutils literal notranslate"><span class="pre">plot</span></code> function (from the <code class="docutils literal notranslate"><span class="pre">Plots</span></code> library) required us to invoke the <a class="reference internal" href="python/programming/math/vector.html#Vector.to_python" title="Vector.to_python"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.to_python()</span></code></a> which copies it into a list, which Julia interprets as a <code class="docutils literal notranslate"><span class="pre">Vector{Float64}</span></code>.</p>
<p>Such conversion is not always necessary; Julia correctly handles NEURON <a class="reference internal" href="python/programming/math/vector.html#Vector" title="Vector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vector</span></code></a> manipulations like <code class="docutils literal notranslate"><span class="pre">length(v)</span></code>, <code class="docutils literal notranslate"><span class="pre">v[4]</span></code>, and vector arithmetic <code class="docutils literal notranslate"><span class="pre">v</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">v</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When used inside Julia, NEURON <a class="reference internal" href="python/programming/math/vector.html#Vector" title="Vector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vector</span></code></a> objects are 1-indexed, as is the Julia convention.
(Python and HOC are 0-indexed.)
That is, <code class="docutils literal notranslate"><span class="pre">vec[1]</span></code> returns the first item in <code class="docutils literal notranslate"><span class="pre">vec</span></code> not the second item.</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">julia</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="o">.</span><span class="kt">Vector</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">72</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">])</span>
<span class="n">PyObject</span><span class="w"> </span><span class="kt">Vector</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="n">julia</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="mf">5.0</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Due to Julia’s auto-type-conversion rules,
invoking <a class="reference internal" href="python/programming/math/vector.html#Vector.as_numpy" title="Vector.as_numpy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.as_numpy()</span></code></a> directly in Julia will cause a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array to be created on the
Python side but then be immediately <em>copied</em> to a <code class="docutils literal notranslate"><span class="pre">Vector{Float64}</span></code>; as such, changes to the returned
object would <em>not</em> affect the original <a class="reference internal" href="python/programming/math/vector.html#Vector" title="Vector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Vector</span></code></a>; that is, a direct call to <a class="reference internal" href="python/programming/math/vector.html#Vector.as_numpy" title="Vector.as_numpy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.as_numpy()</span></code></a>
in Julia behaves functionally equivalent to calling <a class="reference internal" href="python/programming/math/vector.html#Vector.to_python" title="Vector.to_python"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Vector.to_python()</span></code></a>.</p>
<p>To avoid copying the Vector values, explicitly invoke <code class="docutils literal notranslate"><span class="pre">pycall</span></code> and specify <code class="docutils literal notranslate"><span class="pre">PyArray</span></code> as the return
type, e.g.</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">jvec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pycall</span><span class="p">(</span><span class="n">vec</span><span class="o">.</span><span class="n">as_numpy</span><span class="p">,</span><span class="w"> </span><span class="n">PyArray</span><span class="p">)</span>
</pre></div>
</div>
<p>Such a <code class="docutils literal notranslate"><span class="pre">jvec</span></code> can then be used with e.g. the <code class="docutils literal notranslate"><span class="pre">plot</span></code> function.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hoc/analysis/guitools/impedanx.html" class="btn btn-neutral float-left" title="Impx" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorials/index.html" class="btn btn-neutral float-right" title="Python tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Duke, Yale and the Blue Brain Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>